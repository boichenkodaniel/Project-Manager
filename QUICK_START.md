# Быстрый старт

## Шаг 1: Настройка базы данных

1. Убедитесь, что PostgreSQL запущен и база данных `Project-manager` создана
2. Выполните SQL скрипт для создания таблиц:

```bash
psql -U postgres -d Project-manager -f database_update.sql
```

Или через psql:
```sql
\c Project-manager
\i database_update.sql
```

## Шаг 2: Настройка подключения к БД

Откройте файл `src/backend/config/db.php` и проверьте настройки:

```php
$host = 'localhost';
$dbname = 'Project-manager';
$username = 'postgres';
$password = 'pg123'; // Ваш пароль PostgreSQL
```

## Шаг 3: Создание первого администратора

### Вариант 1: Через PHP скрипт (рекомендуется)

```bash
php create_admin.php
```

Это создаст администратора с данными:
- Логин: `admin`
- Пароль: `admin123`
- Email: `admin@example.com`

### Вариант 2: Через SQL

Выполните в PostgreSQL:

```sql
INSERT INTO "User" (fullname, email, login, password, role)
VALUES (
    'Администратор',
    'admin@example.com',
    'admin',
    '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- пароль: admin123
    'Администратор'
);
```

Или используйте функцию для хеширования пароля в PHP:

```php
<?php
echo password_hash('ваш_пароль', PASSWORD_DEFAULT);
?>
```

## Шаг 4: Установка зависимостей

```bash
npm install
```

## Шаг 5: Запуск серверов

### Вариант 1: Одновременный запуск (рекомендуется)

```bash
npm run dev:full
```

Это запустит:
- PHP сервер на `http://localhost:8000`
- Vite dev server на `http://localhost:5173` (или другой порт)

### Вариант 2: Раздельный запуск

Терминал 1 (PHP):
```bash
npm run backend
```

Терминал 2 (Vite):
```bash
npm run dev
```

## Шаг 6: Вход в систему

1. Откройте браузер и перейдите на `http://localhost:5173/login.html`
   (или другой порт, указанный Vite)

2. Введите данные администратора:
   - Логин: `admin`
   - Пароль: `admin123`

3. После успешного входа вы будете перенаправлены на главную страницу

## Проверка работы

После входа вы сможете:

1. **Как администратор:**
   - Управлять пользователями (создавать, редактировать, удалять)
   - Создавать проекты и задачи
   - Просматривать все данные

2. **Создать других пользователей:**
   - Откройте модальное окно создания (кнопка "+")
   - Выберите вкладку "User"
   - Заполните форму:
     - User name: Имя пользователя
     - Email: email@example.com
     - Login: логин для входа
     - Password: пароль
     - Role: выберите роль (Исполнитель, Руководитель проектов, Клиент, Администратор)

3. **Создать проект:**
   - Откройте модальное окно создания
   - Выберите вкладку "Project"
   - Заполните форму и выберите клиента

4. **Создать задачу:**
   - Откройте модальное окно создания
   - Выберите вкладку "Task"
   - Заполните форму, выберите проект и назначьте исполнителя

## Устранение проблем

### Ошибка подключения к БД
- Проверьте, что PostgreSQL запущен
- Проверьте настройки в `src/backend/config/db.php`
- Убедитесь, что база данных `Project-manager` существует

### Ошибка 404 при обращении к API
- Убедитесь, что PHP сервер запущен на порту 8000
- Проверьте, что запросы идут на правильный URL (`/api`)

### Страница входа не открывается
- Проверьте, что Vite запущен
- Откройте консоль браузера для просмотра ошибок
- Убедитесь, что файл `login.html` существует в корне проекта

### Не могу войти
- Проверьте, что пользователь создан в базе данных
- Убедитесь, что пароль правильный (для admin: `admin123`)
- Проверьте консоль браузера и Network вкладку для ошибок

## Полезные команды

```bash
# Проверить подключение к БД
psql -U postgres -d Project-manager

# Посмотреть всех пользователей
SELECT id, fullname, email, login, role FROM "User";

# Изменить пароль администратора
UPDATE "User" 
SET password = '$2y$10$...' -- сгенерируйте новый хеш
WHERE login = 'admin';
```

