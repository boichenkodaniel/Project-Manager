# Отладка проблемы с селектом клиентов

## Проблема
Селект клиентов при создании проекта пустой.

## Шаги для отладки:

1. **Откройте консоль браузера (F12)**

2. **Попробуйте создать проект:**
   - Нажмите кнопку "+"
   - Выберите вкладку "Project"
   - Откройте консоль и посмотрите логи

3. **Проверьте логи:**
   - Должны быть сообщения: "Loading users and projects..."
   - "Fetched users:" - должен показать массив пользователей
   - "User roles:" - должен показать роли всех пользователей
   - "Filtered clients for create:" - должен показать отфильтрованных клиентов
   - "Populating select..." - должен показать процесс заполнения селекта

4. **Возможные проблемы:**

   **A. Пользователи не загружаются:**
   - Проверьте вкладку Network в DevTools
   - Найдите запрос к `/api?action=user.index`
   - Проверьте ответ - возможно ошибка 403 (нет доступа)
   - Решение: Убедитесь, что вы вошли как администратор или руководитель проектов

   **B. Пользователи загружаются, но нет клиентов:**
   - Проверьте логи "User roles:" - какие роли у пользователей?
   - Убедитесь, что в базе данных есть пользователи с ролью "Клиент"
   - Решение: Создайте пользователя с ролью "Клиент"

   **C. Клиенты есть, но не фильтруются:**
   - Проверьте логи "Filtered clients for create:"
   - Если массив пустой, проверьте формат роли в базе данных
   - Решение: Убедитесь, что роль хранится как "Клиент" (с заглавной буквы)

5. **Быстрая проверка в базе данных:**
   ```sql
   SELECT id, fullname, email, role FROM "User" WHERE role = 'Клиент';
   ```

6. **Если проблема в правах доступа:**
   - Войдите как администратор
   - Или проверьте, что текущий пользователь имеет роль "Руководитель проектов" или "Администратор"

## Что было добавлено для отладки:

- Подробное логирование загрузки пользователей
- Логирование фильтрации клиентов
- Логирование заполнения селекта
- Обработка ошибок с понятными сообщениями

